\chapter{Implementacja systemu}

W tym rozdziale zosta³a opisana implementacja zaprojektowanego systemu. Projekt systemu zak³ada³ stworzenie aplikacji serwerowej do komunikacji z bazami danych, czterech systemów replikacji sk³adaj¹cych siê z dwóch instancji bazy danych, oraz wykorzystanie aplikacji benchmarkowej do testów wydajnoœciowych. 

Po przeprowadzeniu wstêpnych testów na czêœciowo ukoñczonym systemie konieczne by³o wprowadzenie pewnej modyfikacji. Ze wzglêdu na zastosowane w implementacji technologie testy wydajnoœciowe prowadzone bêd¹ bezpoœrednio na bazach danych, z pominiêciem aplikacji serwerowej. Jest to spowodowane u¿yciem frameworka Hibernate oraz Spring JPA do realizacji warstwy dostêpu do bazy danych, co ma wp³yw na otrzymywane wyniki pomiaru czasu dostêpu i mog³oby prowadziæ do niedok³adnej analizy. Aplikacja serwerowa wykorzystana zostanie do utworzenia, weryfikacji i aktualizacji schematu bazy danych na wybranym serwerze przy pomocy mapowania relacyjnego frameworka Hibernate.  

\section{Aplikacja serwerowa}

\subsection{Struktura plików projektu}


\begin{figure}[H]
\centering
\includegraphics[height=7cm]{{{img/struct}}}%
\caption{Struktura plików projektu}%
\label{}%
\end{figure}

screenshot ze struktury plikow i opis co zawiera ka¿da paczka
\subsection{Szczegó³y implementacji wybranych funkcjonalnoœci}

- przyk³adowy kontroller select 
- przyk³adowy kontroller insert
- przyk³adowy kontroller update 

- repo JPA



\begin{lstlisting}[caption=Repozytorium JPA]

@RestController
@RequestMapping(value = {"/antenna", "antenna"})
public class AntennaController {

    @Autowired
    AntennaRepository antennaRepository;

    @RequestMapping(value = "find", produces = "application/json", method = RequestMethod.GET)
    public Antenna findById(@RequestParam("id") int id) {
        return antennaRepository.findOne(id);
    }
}

\end{lstlisting}



\begin{lstlisting}[caption=Repozytorium JPA]
public interface AntennaRepository extends JpaRepository<Antenna,Integer> {

}

\end{lstlisting}



\begin{lstlisting}[caption=Model]


\end{lstlisting}

\section{Baza danych}

informacja o VirtualBox
jak zosta³ postawiony serwer 
coœ o clusterach utworzonych w postgresie i portach jak siê do nich odnosi 

\subsection{Konfiguracja replikacji}

\subsubsection{Bucardo}

opis + konfiguracja

\subsubsection{Pg-Pool II}

opis + konfiguracja

\subsubsection{Natywna replikacja PostgreSQL}

informacja o typach replikacji 

opis replikacji logicznej + konfiguracja,
opis replikacji strumieniowej + konfiguracja

ró¿nice miêdzy nimi na przyk³adzie kolumny replication\_timestamp

\subsection{Generowanie danych testowych}

opis mockaroo 
screenshot z interfejsu 

jakiœ json schema tabeli 

wygenerowany sql? 

informacja o limicie do 1000 wierszy i koniecznoœæ u¿ycia spanwera do g³ównej tabeli 

Spawner data generator 

opis, aplikacja desktopowa, generuje nieograniczona ilosc danych 
mo¿na uzyæ tego do generowania kluczy publicznych z limitem 1000 na podstawie mockaroo 

generowanie 100k danych random\_int w ka¿dej kolumnie 

